'use strict';

<<<<<<< HEAD
var regexExec = RegExp.prototype.exec;
var tryRegexExec = function tryRegexExec(value) {
	try {
=======
var has = require('has');
var regexExec = RegExp.prototype.exec;
var gOPD = Object.getOwnPropertyDescriptor;

var tryRegexExecCall = function tryRegexExec(value) {
	try {
		var lastIndex = value.lastIndex;
		value.lastIndex = 0;

>>>>>>> b52cc917bd6158e211e6fd5ad8ad68cceba8ac8e
		regexExec.call(value);
		return true;
	} catch (e) {
		return false;
<<<<<<< HEAD
=======
	} finally {
		value.lastIndex = lastIndex;
>>>>>>> b52cc917bd6158e211e6fd5ad8ad68cceba8ac8e
	}
};
var toStr = Object.prototype.toString;
var regexClass = '[object RegExp]';
var hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';

module.exports = function isRegex(value) {
<<<<<<< HEAD
	if (typeof value !== 'object') { return false; }
	return hasToStringTag ? tryRegexExec(value) : toStr.call(value) === regexClass;
=======
	if (!value || typeof value !== 'object') {
		return false;
	}
	if (!hasToStringTag) {
		return toStr.call(value) === regexClass;
	}

	var descriptor = gOPD(value, 'lastIndex');
	var hasLastIndexDataProperty = descriptor && has(descriptor, 'value');
	if (!hasLastIndexDataProperty) {
		return false;
	}

	return tryRegexExecCall(value);
>>>>>>> b52cc917bd6158e211e6fd5ad8ad68cceba8ac8e
};

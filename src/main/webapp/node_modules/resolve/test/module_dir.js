var path = require('path');
var test = require('tape');
var resolve = require('../');

test('moduleDirectory strings', function (t) {
    t.plan(4);
<<<<<<< HEAD
<<<<<<< HEAD
    var dir = __dirname + '/module_dir';
    var xopts = {
        basedir : dir,
=======
    var dir = path.join(__dirname, 'module_dir');
    var xopts = {
        basedir: dir,
>>>>>>> b52cc917bd6158e211e6fd5ad8ad68cceba8ac8e
=======
    var dir = path.join(__dirname, 'module_dir');
    var xopts = {
        basedir: dir,
>>>>>>> refs/remotes/origin/master
        moduleDirectory: 'xmodules'
    };
    resolve('aaa', xopts, function (err, res, pkg) {
        t.ifError(err);
<<<<<<< HEAD
<<<<<<< HEAD
        t.equal(res, dir + '/xmodules/aaa/index.js');
    });
    
    var yopts = {
        basedir : dir,
=======
=======
>>>>>>> refs/remotes/origin/master
        t.equal(res, path.join(dir, '/xmodules/aaa/index.js'));
    });

    var yopts = {
        basedir: dir,
<<<<<<< HEAD
>>>>>>> b52cc917bd6158e211e6fd5ad8ad68cceba8ac8e
=======
>>>>>>> refs/remotes/origin/master
        moduleDirectory: 'ymodules'
    };
    resolve('aaa', yopts, function (err, res, pkg) {
        t.ifError(err);
<<<<<<< HEAD
<<<<<<< HEAD
        t.equal(res, dir + '/ymodules/aaa/index.js');
=======
        t.equal(res, path.join(dir, '/ymodules/aaa/index.js'));
>>>>>>> b52cc917bd6158e211e6fd5ad8ad68cceba8ac8e
=======
        t.equal(res, path.join(dir, '/ymodules/aaa/index.js'));
>>>>>>> refs/remotes/origin/master
    });
});

test('moduleDirectory array', function (t) {
    t.plan(6);
<<<<<<< HEAD
<<<<<<< HEAD
    var dir = __dirname + '/module_dir';
    var aopts = {
        basedir : dir,
        moduleDirectory: [ 'xmodules', 'ymodules', 'zmodules' ]
    };
    resolve('aaa', aopts, function (err, res, pkg) {
        t.ifError(err);
        t.equal(res, dir + '/xmodules/aaa/index.js');
    });
    
    var bopts = {
        basedir : dir,
        moduleDirectory: [ 'zmodules', 'ymodules', 'xmodules' ]
    };
    resolve('aaa', bopts, function (err, res, pkg) {
        t.ifError(err);
        t.equal(res, dir + '/ymodules/aaa/index.js');
    });
    
    var copts = {
        basedir : dir,
        moduleDirectory: [ 'xmodules', 'ymodules', 'zmodules' ]
    };
    resolve('bbb', copts, function (err, res, pkg) {
        t.ifError(err);
        t.equal(res, dir + '/zmodules/bbb/main.js');
=======
=======
>>>>>>> refs/remotes/origin/master
    var dir = path.join(__dirname, 'module_dir');
    var aopts = {
        basedir: dir,
        moduleDirectory: ['xmodules', 'ymodules', 'zmodules']
    };
    resolve('aaa', aopts, function (err, res, pkg) {
        t.ifError(err);
        t.equal(res, path.join(dir, '/xmodules/aaa/index.js'));
    });

    var bopts = {
        basedir: dir,
        moduleDirectory: ['zmodules', 'ymodules', 'xmodules']
    };
    resolve('aaa', bopts, function (err, res, pkg) {
        t.ifError(err);
        t.equal(res, path.join(dir, '/ymodules/aaa/index.js'));
    });

    var copts = {
        basedir: dir,
        moduleDirectory: ['xmodules', 'ymodules', 'zmodules']
    };
    resolve('bbb', copts, function (err, res, pkg) {
        t.ifError(err);
        t.equal(res, path.join(dir, '/zmodules/bbb/main.js'));
<<<<<<< HEAD
>>>>>>> b52cc917bd6158e211e6fd5ad8ad68cceba8ac8e
=======
>>>>>>> refs/remotes/origin/master
    });
});
